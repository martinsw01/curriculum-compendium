# 10 Regular local rings

## 10.1 Basic Properties of Regular Local Rings

??? lemma "Lemma 10.1"
    ### Generating modules over a local ring <a id="l101"></a>

    $\begin{align*}
        \text{Let } & M \text{ be a f.g. } R\text{-module} \\
        & m_1, \dots, m_n \in M \\
        & \overline m_i := m_i + \m M
    \end{align*}$

    $$M = (m_1, \dots, m_n) \iff M/\m M = (\overline m_1, \dots, \overline m_n)$$

    ??? proof
        === "$\implies$"
            This is clear.

        === "$\impliedby$"
            Let $N := (m_1, \dots, m_n) \subseteq M$.

            $\begin{align*}
                \overset{\text{hyp?}}{\implies}&
                M \subseteq N + \m M \\
                \implies& M/N \subseteq \m \cdot M/N \\
                \implieshref{../../dimensions/principal_ideal_thm/#t73}{N.L.}&
                M = N
            \end{align*}$


??? definition "Definition 10.2"
    **Regular ring**

    A ring local Noetherian $(R, \m)$ is called **regular** if

    $$\dim R = \dim_K (\m/\m^2)$$

    $\begin{align*}
        & \iff \m \text{ can be generated by } \dim R \text{ elements} \\
        & \iff R \text{ has a system of parameters that generates } \m
    \end{align*}$

    This system of parameters is called a **regular system of parameters**.

    ---

    **(Non-)Singular points**

    $\begin{align*}
        \text{Let } & S \text{ be a Noetherian ring} \\
        & X := \Spec S \\
        & P \in X
    \end{align*}$

    - $P$ is called **nonsingular** if $S_P$ is regular.
    - $P$ is called **singular** otherwise.
    - $S$ is called a **regular ring** if $X$ has no singular points.

    ---

    **Affine varieties**
    
    $\begin{align*}
        \text{Let } & X \text{ be an affine variety} \\
        & x \in X
    \end{align*}$

    - $x$ is called **nonsingular** if $K[X]_x$ is regular.
    - $x$ is called **singular** otherwise.
    - $X$ is called **non-singular** if all $x \in X$ are nonsingular.


??? example "Example 10.3"
    Let $R$ be a ring with $\dim R = 0$.

    $$R \text{ is regular } \iff R \text{ is a field} \iff R \text{ is reduced}$$


??? theorem "Theorem 10.4"
    ### Associated graded ring and regularity <a id="t104"></a>

    Let $R$ be a local ring.

    $$R \text{ is regular } \iff \gr R \text{ is isomorphic to a polynomial ring over } K$$

    ??? proof
        Let $A:=\gr R$.
    
        $$ \implieshref{../dimension_theory/#t98}{T.9.8} \dim A = \dim R =: n$$
    
        === "$\implies$"
            As $R$ is regular, $\m=(m_1, \dots, m_n)$ is generated by $n$ elements.
    
            $\begin{align*}
                &\implies R^* = K[m_1 t, \dots, m_n t] \text{ is f.g.} \\
                &\implies \gr R \text{ is f.g.}
            \end{align*}$
    
            Then, combining [T.4.9](../../dimensions/krull_dim_trans_deg/#t49) and
            [P.4.10](../../dimensions/krull_dim_trans_deg/#p410), we get that the $m_i$ are
            algeraically independent. Therefore, $\gr R$ is isomorphic to a polynomial ring over $K$.
    
        === "$\impliedby$"
            By [C.4.7](../../dimensions/krull_dim_trans_deg/#c47), we have that $A$ is generated
            by $n$ elements $b_1, \dots, b_n$.

            We may assume that the homogeneous components of $b_i$ of degree $0$ is $0$.

            Let $\pi: A \to A_1$ be the projection onto the first degree component.

            We have that $\forall\ a \in A\ \exists\ f \in K[x_1, \dots, x_n] : a = f(b_1, \dots, b_n)$.

            $\begin{align*}
                & \implies \pi(a) \text{ is a } K \text{-linear combination of } \pi(b_1), \dots, \pi(b_n) \\
                & \implies A_1 \text{ is generated by } \pi(b_1), \dots, \pi(b_n) \\
                & \implies \dim_K(\m/\m^2) = \dim_K(A_1) \leq n
            \end{align*}$


??? example "Example 10.5"
    $R:=K[\![x_1, \dots, x_n]\!]$ is a regular local ring.

    ???+ proof
        === "Local ring"
            Let $R':=K[x_1, \dots, x_n]$.

            $\begin{align*}
                & \implies \m':=(x_1, \dots, x_n)_{R'} \in \Spec {R'} \\
                & \implies R = R'_{\m'} \text{ is a local ring}
            \end{align*}$

        === "Regular"
            We have that $\m = (x_1, \dots, x_n)_R$, so $\gr R \cong K[x_1, \dots, x_n]$.
    
            By [T.10.4](#t104), $R$ is regular.


??? corollary "Corollary 10.6"
    <a id="c106"></a>
    **(a)** Every regular local ring is an integral domain.

    **(b)** Every regular local ring is normal.

    ??? proof
        === "(a)"
            $\begin{align*}
                \implieshref{#t104}{T.10.4}& \gr R \text{ is isomorphic to a polynomial ring over } K \\
                \implies& \gr R \text{ is an integral domain} \\
                \implieshref{../dimension_theory/#t910}{T.9.10}& R \text{ is an integral domain}
            \end{align*}$

        === "(b)"
            $\begin{align*}
                \implieshref{#t104}{T.10.4}& \gr R \text{ is isomorphic to a polynomial ring over } K \\
                \implies& \gr R \text{ is a factorial ring} \\
                \implieshref{../../dimensions/integral_extensions/#p88}{P.8.8}& \gr R \text{ is normal} \\
                \implieshref{../dimension_theory/#t910}{T.9.10}& R \text{ is an integral domain}
            \end{align*}$


??? example "Example 10.7"
    === "(1)"
        $\begin{align*}
            \text{Let } & S \text{ be a Noetherian ring} \\
            & P \in \Spec S \text{ contained in ore than ine irreducible component of } \Spec S
        \end{align*}$

        $\begin{align*}
            \implies & P \text{ contains more than one minimal prime ideal} \\
            \implieshref{../../dimensions/localization/#t55}{T.5.5}& S_P \text{ has more than one minimal prime ideal} \\
            \implies& S_P \text{ is not an integral domain} \\
            \implieshref{#c106}{C.10.6(a)}& S_P \text{ is not regular} \\
            \implies& P \text{ is a singular point of } \Spec S
        \end{align*}$

    === "(2)"
        Special case of **(1)**:

        A point in an affine variety that lies in the intersection of more than one irreducible component is a 
        singular point.

    === "(3)"
        $\begin{align*}
            \text{Let } & A:=\Z[\sqrt{-3}] \subseteq \C \\
            & \m = (2, 1+\sqrt{-3})_A \\
            & R := A_\m \\
            & z := \frac{1+\sqrt{-3}}{2} \in \Quot(R)\setminus R
        \end{align*}$

        $\begin{align*}
            \implies& z^2 - z + 1 = 0 \\
            \implies& R \text{ is not normal} \\
            \implieshref{#c106}{C.10.6(b)}& R \text{ is not regular} \\
        \end{align*}$


## 10.2 The Jacobian Criterion

??? definition "Definition: Singular locus"
    The **singular locus** of an affine variety $X$ is the set of all singular points of $X$.


??? theorem "Theorem 10.8"
    ### Jacobian criterion <a id="t108"></a>

    $\begin{align*}
        \text{Let } & I = (f_1, \dots, f_n) \ideal K[x_1, \dots, x_n] \\
        & P, Q \in \V_\Spec{K[x_1, \dots, x_n]}(I) \text{ s.t. } Q \text{ is minimal over } I \text{ and } Q \subseteq P
    \end{align*}$

    **(a)**

    $$\rank \left(\frac{\partial f_i}{\partial x_j} \mod P \right) \le \ht Q$$

    ---

    **(b)**

    $$\rank \left(\frac{\partial f_i}{\partial x_j} \mod P \right) = \ht Q \implies (K[x_1, \dots, x_n]/I)_{P/I} \text{ is regular}$$

    ---

    **(c)**

    $$\Quot(K[x_1, \dots, x_n]/P) \text{ is a separable field extension of } K \implies \text{ The converse of (b) holds}$$

    ???+ remark
        Separability holds if

        - $K$ is a perfect field
        - or $P=(x_1 - \xi_1, \dots, x_n - \xi_n)$ corresponds to a point $(\xi_1, \dots, \xi_n) \in \V_{K^n}(I)$


???+ corollary "Corollary 10.9"
    ### The singular locus and the non-singular locus <a id="c109"></a>

    **(a)**

    $\begin{align*}
        & A \text{ is an affine algebra over a separable field} \\
        & \implies X_{\text{sing}} \subseteq X = \Spec A \text{ is closed}
    \end{align*}$

    ---

    **(b)**

    $\begin{align*}
        & R \text{ is a reduced Noetherian ring} \\
        & \implies \text{ The nonsingular locus in } \Spec R \text{ is dense} 
    \end{align*}$

    ---

    **(c)**

    $$X_{\text{sing}} \subseteq X = \V(I) \text{ is closed}$$

    ---

    **(d)**

    The nonsingular locus in an affine variety over an algebraically closed field is open and dense.